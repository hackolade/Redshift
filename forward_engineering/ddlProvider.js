"use strict";var $e=Object.defineProperty;var a=(T,l)=>$e(T,"name",{value:l,configurable:!0});var V=(T,l)=>()=>(l||T((l={exports:{}}).exports,l),l.exports);var te=V((Ne,ee)=>{"use strict";ee.exports={number:"DECIMAL",string:"VARCHAR",date:"DATE",timestamp:"TIMESTAMP",binary:"BINARY",boolean:"BOOLEAN",document:"SUPER",objectId:"VARCHAR(24)",default:"CHAR"}});var j=V((Re,re)=>{"use strict";re.exports={createDatabase:"",createSchema:'CREATE SCHEMA${ifNotExist} "${name}"${authorization}${quota};\n',createExternalSchema:'CREATE EXTERNAL SCHEMA${ifNotExist} "${name}" FROM ${source} DATABASE "${sourceDBName}"${sourceSchemaName}${region}${uri} IAM_ROLE "${iamRole}"${secretARN}${catalogRole}${createExternalDatabase};\n',createTable:'CREATE ${temporary}TABLE${ifNotExist} "${schemaName}"."${name}"(${columnDefinitions}${tableConstraints}${likeStatement})${tableAttributes};\n${comment}${columnDescriptions}',createTableAs:'CREATE ${temporary}TABLE "${schemaName}"."${name}" ${backup}${tableAttribute} AS ${query};\n${comment}${columnDescriptions}',createView:'CREATE${orReplace} VIEW "${schemaName}"."${name}"(\n	${column_list}\n)\nAS SELECT ${table_columns}\nFROM ${table_name}${withNoSchema};\n${comment}',createMaterializedView:'CREATE MATERIALIZED VIEW "${schemaName}"."${name}"${backup}${tableAttributes}${autoRefresh}\nAS SELECT ${table_columns}\nFROM ${table_name};\n${comment}',createFunction:"CREATE${orReplace}FUNCTION ${name} (${arguments})\n	RETURNS ${returnDataType}\n${volatility}\nAS $$\n${statement}\n$$ LANGUAGE ${language};\n",createProcedure:"CREATE${orReplace}PROCEDURE ${name} (${arguments})\nAS $$\n${statement}\n$$ LANGUAGE plpgsql${securityMode}${configurationParameter};\n",columnDefinition:'"${name}" ${type}${default}${encoding}${distKey}${sortKey}${notNull}${unique}${primaryKey}${inlineConstraints}${references}',compoundSortKey:"${sortStyle} SORTKEY (${keys})",compoundUniqueKey:"UNIQUE (${keys})",compoundPrimaryKey:"PRIMARY KEY (${keys})",createTableForeignKey:"FOREIGN KEY (${columns}) REFERENCES ${primary_table} (${primary_columns})",dropSchema:"DROP SCHEMA IF EXISTS ${name};",alterSchema:"ALTER SCHEMA ${name}${quota};",dropFunction:"DROP FUNCTION ${name} (${arguments});",dropProcedure:"DROP PROCEDURE ${name} (${arguments});",dropTable:"DROP TABLE IF EXISTS ${name};",alterDistKey:"ALTER TABLE ${name} ALTER ${distConstraint};",alterSortKey:"ALTER TABLE ${name} ALTER ${sortKeyConstraint};",alterPrimaryKey:"ALTER TABLE ${name} ADD ${primaryKeyConstraint};",alterUnique:"ALTER TABLE ${name} ADD ${uniqueConstraint};",renameColumn:'ALTER TABLE ${tableName} RENAME COLUMN "${oldColumnName}" TO "${newColumnName}";',alterColumnType:'ALTER TABLE ${tableName} ALTER COLUMN "${columnName}" TYPE ${type};',addColumn:"ALTER TABLE ${tableName} ADD COLUMN ${columnStatement};",dropColum:'ALTER TABLE ${tableName} DROP COLUMN "${columnName}";',dropView:"DROP VIEW IF EXISTS ${name};",comment:"\nCOMMENT ON ${object} ${objectName} IS ${comment};\n"}});var se=V((Se,ne)=>{"use strict";ne.exports={SMALLINT:{capacity:2},INTEGER:{capacity:4},BIGINT:{capacity:8},DECIMAL:{capacity:32},REAL:{capacity:4},"DOUBLE PRECISION":{capacity:8,mode:"floating"},BOOLEAN:{mode:"boolean"},VARCHAR:{mode:"varying"},CHAR:{size:1},DATE:{format:"YYYY-MM-DD"},TIMESTAMP:{format:"YYYY-MM-DD hh:mm:ss"},TIMESTAMPTZ:{format:"YYYY-MM-DD hh:mm:ssof"},GEOMETRY:{format:"spatial"},SUPER:{format:"semi-structured"},TIME:{format:"hh:mm:ss"},TIMETZ:{format:"hh:mm:ssof"},VARBYTE:{}}});var W=V((Ce,ie)=>{"use strict";ie.exports=T=>{let l=T.require("lodash");return a((o,E,s)=>l.has(E,"isActivated")&&!E.isActivated?s?"/* "+o+" */":o.includes(`
`)?`/*
`+o+` */
`:"// "+o:o,"commentIfDeactivated")}});var w=V((be,oe)=>{"use strict";oe.exports=T=>{let l=T.require("lodash"),{checkAllKeysActivated:C,clean:o,tab:E}=T.require("@hackolade/ddl-fe-utils").general,s=W()(T),K=a(t=>String(t).replace(/\'/g,"''").replace(/\\\\/g,"\\").replace(/\\/g,"\\\\"),"escape"),R=a(t=>l.isUndefined(t)?t:`'${K(t)}'`,"toString"),f=a(t=>l.toLower(t)==="none","isNone"),S=a(t=>l.toLower(t)==="auto","isAuto"),M=a(t=>f(t)?t:R(t),"toStringIfNotNone"),F=a(t=>S(t)?t:R(t),"toStringIfNotAuto"),G=a(t=>isNaN(t)?"":Number(t),"toNumber"),q=a(t=>t===!0?"TRUE":"FALSE","toBoolean"),_=a(t=>Object.entries(t).filter(([r,p])=>!l.isEmpty(p)||p!==!1).map(([r,p])=>(Array.isArray(p)&&(p="("+p.filter($=>!l.isEmpty($)).join(", ")+")"),`${r}=${p}`)).join(`
`),"toOptions"),U=a((t,r,p)=>{if(r.GUID===t)return[{...r,name:p}];if(l.isPlainObject(r.properties)){let $=Object.keys(r.properties).reduce((e,n)=>{if(e.length)return e;let i=U(t,r.properties[n],n);return i?e.concat(i):e},[]);if($.length)return[{...r,name:p}].concat($)}else if(l.isArray(r.items)){let $=r.items.reduce((e,n)=>{if(e.length)return e;let i=U(t,n,"");return i?e.concat(i):e},[]);if($.length)return[{...r,name:p}].concat($)}else if(r.items){let $=U(t,r.items,"");if($)return[{...r,name:p}].concat($)}},"findJsonSchemaChain"),x=a(t=>{if(Array.isArray(t)){let r=", ",p=[],$=t.reduce((e,n)=>{let i=l.isString(n.name)?n.name.trim():n.trim();return l.get(n,"isActivated",!0)?[...e,i]:(p.push(i),e)},[]).filter(Boolean);return $.length===0?s(p.join(r),{isActivated:!1},!0):p.length===0?$.join(r):$.join(r)+s(r+p.join(r),{isActivated:!1},!0)}return t},"foreignKeysToString"),Q=a(t=>t.map(r=>r.name.trim()).join(", "),"foreignActiveKeysToString"),m=a(t=>C(t.foreignKey)&&C(t.primaryKey)&&t.primaryTableActivated&&t.foreignTableActivated,"checkIfForeignKeyActivated"),u=a((t,r)=>{if(!r)return t.map(e=>e.name).join(`,
	`);let p=t.filter(e=>e.isActivated).map(e=>e.name),$=t.filter(e=>!e.isActivated).map(e=>e.name);return p.length===0?s($.join(`,
	`),{isActivated:!1},!0):$.length===0?p.join(`,
	`):p.join(`,
	`)+`
	`+s($.join(`,
	`),{isActivated:!1},!0)},"viewColumnsToString"),N=a(t=>r=>o({name:r.name?O(r.name,t):void 0,orReplace:r.orReplace,arguments:r.functionArguments||r.storedProcArgument||void 0,returnDataType:r.functionReturnType||r.storedProcDataType||void 0,volatility:r.functionVolatility||r.storedProcVolatility?(r.functionVolatility||r.storedProcVolatility).toUpperCase():void 0,statement:r.functionBody||r.storedProcFunction?E(l.trim(r.functionBody||r.storedProcFunction),"  "):void 0,language:r.functionLanguage||r.storedProcLanguage}),"hydrateUdf"),Y=a(t=>r=>o({name:r.name?O(r.name,t):void 0,orReplace:r.orReplace,arguments:r.inputArgs||void 0,statement:r.body?E(l.trim(r.body)):void 0,securityMode:r.securityMode?`
SECURITY ${r.securityMode}`:void 0,configurationParameter:r.configurationParameter?`
SET configuration_parameter TO ${r.configurationParameter}`:void 0}),"hydrateProcedure"),H=a(t=>t.name&&t.arguments&&t.language&&t.returnDataType&&t.statement,"filterUdf"),z=a(t=>t.name&&t.arguments&&t.statement,"filterProcedure"),Z=a(t=>({...t,orReplace:t.orReplace?" OR REPLACE ":" "}),"setOrReplace"),O=a((t,r)=>{if(t&&r)return`"${r}"."${t}"`;if(!r)return`"${t}"`},"getCompositeName");return{toString:R,toNumber:G,toBoolean:q,toOptions:_,toStringIfNotNone:M,toStringIfNotAuto:F,foreignKeysToString:x,checkIfForeignKeyActivated:m,foreignActiveKeysToString:Q,viewColumnsToString:u,hydrateUdf:N,hydrateProcedure:Y,filterUdf:H,filterProcedure:z,setOrReplace:Z,getCompositeName:O}}});var me=V((Ie,ae)=>{"use strict";ae.exports=T=>{let l=j(),C=T.require("@hackolade/ddl-fe-utils").assignTemplates,o=W()(T),E=T.require("lodash"),{toString:s}=w()(T),K=a((m,u)=>{m=E.toUpper(m);let N=m;return f(m)&&u.timePrecision&&!E.isNaN(u.timePrecision)&&(N=`${m}(${u.timePrecision})`),["VARCHAR","CHAR","CHARACTER","VARBYTE"].includes(m)&&u.length&&!E.isNaN(u.length)&&(N=`${m}(${u.length})`),["NUMBER","DECIMAL","NUMERIC"].includes(m)&&!E.isNaN(u.scale)&&!E.isNaN(u.precision)&&(N=`${m}(${Number(u.precision)},${Number(u.scale)})`),N},"decorateType"),R=a(m=>["VARCHAR","NVARCHAR","TEXT","CHAR","CHARACTER VARYING","BPCHAR","CHARACTER","NCHAR"].includes(E.toUpper(m)),"isString"),f=a(m=>["TIME","TIMESTAMP","TIMESTAMPTZ","TIMETZ"].includes(E.toUpper(m)),"isTimestamp"),S=a(m=>m.replace(/^\'([\S\s]+)\'$/,"$1").replace(/\'/g,"''"),"escapeString"),M=a((m,u)=>R(m)?`'${S(String(u))}'`:E.toUpper(m)==="BOOLEAN"?E.toUpper(u):u,"getDefault"),F=a((m,u)=>u?" QUOTA UNLIMITED":m?` QUOTA ${m} MB`:"","getQuota"),G=a((m,u,N)=>{let Y=["Redshift","Postgres"],H=m||u;return H&&Y.includes(N)?` SCHEMA "${H}"`:""},"getSourceSchemaNameForExternalSchema"),q=a((m,u)=>m&&["MYSQL","Postgres"].includes(u)?` SECRET_ARN ${m}`:"","getARN"),_=a((m,u,N)=>["Hive metastore","Postgres","MYSQL"].includes(N)?m&&u?` URI ${m} PORT ${u}`:m?` URI ${m}`:"":"","getUri"),U=a((m,u)=>E.chain(u).filter("comment").map(N=>{let Y=C(l.comment,{object:"COLUMN",objectName:`${m}."${N.name}"`,comment:s(N.comment)});return o(Y,N)}).join("").value(),"getColumnComments"),x=a(m=>m.map(u=>u.statement).join(`,
	`),"createColumnsStatements");return{getQuota:F,getSourceSchemaNameForExternalSchema:G,getUri:_,getARN:q,decorateType:K,getDefault:M,getColumnComments:U,getColumnsDefinitions:a((m,u)=>{let[N,Y]=E.partition(m,t=>!u||(t==null?void 0:t.isActivated)),H=x(N),z=x(Y),O=z.length?`
	`+o(z,{isActivated:!1},!0):"";return`${H}${O}`},"getColumnsDefinitions")}}});var ue=V((Ue,ce)=>{"use strict";ce.exports=T=>{let{foreignKeysToString:l,foreignActiveKeysToString:C}=w()(T),o=T.require("@hackolade/ddl-fe-utils").assignTemplates;return{generateConstraint:a((s,K,R,f={})=>{let S=s.map(q=>Object.assign({},q,{name:`"${q.name}"`})),M=S.some(q=>q.isActivated),F=C(S);return M&&R&&(F=l(S)),{statement:o(K,{...f,keys:F}),isActivated:M}},"generateConstraint")}}});var de=V((Pe,le)=>{"use strict";le.exports=T=>{let l=T.require("lodash");return{getTableAttributes:a((s,K,R)=>{let f=[];return s!==""&&f.push(s),K!==""&&f.push(K),R.statement&&f.push(R.statement),l.isEmpty(f)?"":`
`+f.join(`
`)},"getTableAttributes"),getTableConstraints:a((s,K,R,f)=>{let S=[];return s&&S.push(s),K.statement&&K.isActivated&&S.push(K.statement),R.statement&&R.isActivated&&S.push(R.statement),f.forEach(M=>{S.push(M.statement)}),l.isEmpty(S)?"":`,
	`+S.join(`,
	`)},"getTableConstraints"),getTableLikeConstraint:a((s,K,R)=>{if(s==="")return"";let f=`${R?`,
	`:""}LIKE ${s}`;return K?f+" INCLUDING DEFAULTS":f},"getTableLikeConstraint")}}});var ge=te(),c=j(),pe=se();module.exports=(T,l,C)=>{let o=C.require("lodash"),{hasType:E}=C.require("@hackolade/ddl-fe-utils").general,s=C.require("@hackolade/ddl-fe-utils").assignTemplates,{foreignKeysToString:K,checkIfForeignKeyActivated:R,foreignActiveKeysToString:f,viewColumnsToString:S,hydrateUdf:M,hydrateProcedure:F,filterUdf:G,filterProcedure:q,setOrReplace:_,getCompositeName:U,toString:x}=w()(C),{decorateType:Q,getDefault:m,getQuota:u,getUri:N,getARN:Y,getSourceSchemaNameForExternalSchema:H,getColumnComments:z,getColumnsDefinitions:Z}=me()(C),{generateConstraint:O}=ue()(C),t=W()(C),{getTableAttributes:r,getTableConstraints:p,getTableLikeConstraint:$}=de()(C);return{createDatabase({name:e,authorization:n,quota:i,sourceDBName:d,ifNotExist:b,sourceSchemaName:L,source:g,external:A,iamRole:y,secretARN:I,catalogRole:P,uri:h,region:v,createExternalDatabase:B,functions:X,procedures:Ae,comment:k}){let J,ye=s(c.comment,{object:"SCHEMA",objectName:U(e),comment:x(k)});A?J=s(c.createExternalSchema,{name:e,ifNotExist:b,source:g,sourceDBName:d,sourceSchemaName:L,region:v,uri:h,iamRole:y,secretARN:I,catalogRole:P,createExternalDatabase:B}):J=s(c.createSchema,{name:e,ifNotExist:b,authorization:n,quota:i});let Ee=X.map(D=>s(c.createFunction,_(D))),Te=Ae.map(D=>s(c.createProcedure,_(D)));return[J,k?o.trimStart(ye):"",...Ee,...Te].filter(Boolean).join(`
`)},createTable(e,n){let i=e.temporary?"TEMPORARY ":"",d=e.selectStatement,b=e.schemaName===""?"public":e.schemaName,L=s(c.comment,{object:"TABLE",objectName:U(e.name,b),comment:x(e.comment)}),g=z(U(e.name,b),e.columnDefinitions);if(d)return s(c.createTableAs,{name:e.name,temporary:i,schemaName:b,backup:e.backup,tableAttributes:r(e.distStyle,e.distKey,e.compoundSortKey),query:d,comment:e.comment?L:"",columnDescriptions:g});let A=Z(e.columns,n);return s(c.createTable,{name:e.name,schemaName:b,temporary:i,likeStatement:$(e.likeTableName,e.includeDefaults,!o.isEmpty(A)),ifNotExist:e.ifNotExist,columnDefinitions:A!==""?`
	`+A:"",tableConstraints:p(e.backup,e.compoundUniqueKey,e.compoundPrimaryKey,e.foreignKeyConstraints),tableAttributes:r(e.distStyle,e.distKey,e.compoundSortKey),comment:e.comment?L:"",columnDescriptions:g})},createView(e,n,i){if(o.isEmpty(e.keys))return"";let d=e.schemaName===""?"public":e.schemaName,{columnList:b,tableColumns:L,tables:g}=e.keys.reduce((y,I)=>{y.columnList.push({name:`"${I.alias||I.name}"`,isActivated:I.isActivated}),y.tableColumns.push({name:`"${I.entityName}"."${I.name}"`,isActivated:I.isActivated});let P=U(I.entityName,I.dbName);return I.entityName&&!y.tables.includes(P)&&y.tables.push(P),y},{columnList:[],tableColumns:[],tables:[]});if(o.isEmpty(g))return"";let A=s(c.comment,{object:"VIEW",objectName:U(e.name,d),comment:x(e.comment)});return e.materialized?s(c.createMaterializedView,{backup:e.backup?`
BACKUP YES`:"",name:e.name,schemaName:d,autoRefresh:e.autoRefresh?`
AUTO REFRESH YES`:"",tableAttributes:r(e.distStyle,e.distKey,{}),table_columns:o.isEmpty(L)?"":`
	`+S(L,i),table_name:g.join(", "),comment:e.comment?A:""}):s(c.createView,{orReplace:e.orReplace?" OR REPLACE":"",name:e.name,schemaName:d,column_list:S(b,i),withNoSchema:e.withNoSchema?" WITH NO SCHEMA BINDING":"",table_columns:o.isEmpty(L)?"":`
	`+S(L,i),table_name:g.join(", "),comment:e.comment?A:""})},createForeignKeyConstraint(e,n){let i=n.name?n.name:"public",d=R(e),b=d?K(e.foreignKey):f(e.foreignKey),L=d?K(e.primaryKey):f(e.primaryKey);return{statement:s(c.createTableForeignKey,{columns:'"'+b+'"',primary_table:`"${e.primarySchemaName||i}"."${e.primaryTable}"`,primary_columns:'"'+L+'"'}),isActivated:d}},convertColumnDefinition(e){return{statement:s(c.columnDefinition,{name:e.name,type:Q(e.type,e),unique:e.unique?" UNIQUE":"",default:o.isUndefined(e.default)?"":" DEFAULT "+m(e.type,e.default),distKey:e.distKey?" DISTKEY":"",sortKey:e.sortKey?" SORTKEY":"",primaryKey:e.primaryKey?" PRIMARY KEY":"",notNull:e.nullable?"":" NOT NULL",encoding:e.encoding?` ENCODE ${e.encoding}`:"",references:""}),isActivated:e.isActivated}},hydrateDatabase(e,{udfs:n,procedures:i}={}){return{name:e.name,authorization:e.authorizationUsername?` AUTHORIZATION "${e.authorizationUsername}"`:"",quota:u(e.quota,e.unlimitedQuota),ifNotExist:e.ifNotExists?" IF NOT EXISTS":"",sourceDBName:e.federatedDatabaseName||e.dataCatalogDatabaseName||e.redshiftDatabaseName,sourceSchemaName:H(e.federatedSchemaName,e.redshiftSchemaName,e.fromSource),source:e.fromSource,external:e.external,iamRole:e.IAM_ROLE,secretARN:Y(e.SECRET_ARN,e.fromSource),catalogRole:e.CATALOG_ROLE&&e.source==="Data catalog"?` CATALOG_ROLE ${e.CATALOG_ROLE}`:"",uri:N(e.URI,e.port,e.fromSource),region:e.source==="Data catalog"?e.region:"",createExternalDatabase:e.createExternalDatabaseIfNotExists?" CREATE EXTERNAL DATABASE IF NOT EXISTS":"",functions:Array.isArray(n)?n.map(M(e.name)).filter(G):[],procedures:Array.isArray(i)?i.map(F(e.name)).filter(q):[],comment:e.description}},hydrateTable({tableData:e,entityData:n,jsonSchema:i}){let d=o.get(n,"[0]",{}),b=o.get(n,"[1]",{}),L=o.get(b,"uniqueKey[0].compositeUniqueKey",[]).map(h=>({name:h.name,isActivated:h.isActivated})),g=o.get(b,"primaryKey[0].compositePrimaryKey",[]).map(h=>({name:h.name,isActivated:h.isActivated})),A=d.autoSortKey??!0,y=o.toUpper(d.sortStyle||""),I=o.get(d,"sortKey[0].compositeSortKey",[]).map(h=>({name:h.name,isActivated:h.isActivated})),P=o.get(d,"distKey[0].compositeDistKey[0]",{});return{...e,comment:d.description,schemaName:e.dbData.name,selectStatement:d.selectStatement,includeDefaults:d.includeDefualts,likeTableName:o.get(e,`relatedSchemas[${d.like}].title`,""),temporary:i.temporary,ifNotExist:i.ifNotExists?" IF NOT EXISTS":"",backup:i.BACKUP?"BACKUP YES":"",distStyle:i.DISTSTYLE?`DISTSTYLE ${i.DISTSTYLE.toUpperCase()}`:"",distKey:!o.isEmpty(P)&&P.isActivated&&P.name?`DISTKEY ("${P.name}")`:"",compoundPrimaryKey:o.isEmpty(g)?"":O(g,c.compoundPrimaryKey,i.isActivated),compoundUniqueKey:o.isEmpty(L)?"":O(L,c.compoundUniqueKey,i.isActivated),compoundSortKey:o.isEmpty(I)||A?"":O(I,c.compoundSortKey,i.isActivated,{sortStyle:y}),query:""}},hydrateView({viewData:e,entityData:n}){let i=n[0],d=o.get(i,"distKey[0].compositeDistKey[0].name",""),{columnList:b,tableColumns:L,tables:g}=e.keys.reduce((A,y)=>(A.columnList.push({name:`"${y.alias||y.name}"`,isActivated:y.isActivated}),A.tableColumns.push({name:`"${y.entityName}"."${y.name}"`,isActivated:y.isActivated}),y.entityName&&!A.tables.includes(y.entityName)&&A.tables.push(y.entityName),A),{columnList:[],tableColumns:[],tables:[]});return o.isEmpty(g)?"":{...e,backup:i.BACKUP,schemaName:e.dbData.name,autoRefresh:i.autoRefresh,materialized:i.materialized,distStyle:i.DISTSTYLE?`DISTSTYLE ${i.DISTSTYLE.toUpperCase()}`:"",distKey:d!==""?`DISTKEY ("${d}")`:"",orReplace:i.orReplace,comment:i.description,withNoSchema:i.withNoSchemaBindings,table_name:g.join('" INNER JOIN "')}},getTypesDescriptors(){return pe},getDefaultType(e){return ge[e]},hydrateViewColumn(e){return e},hasType(e){return E(pe,e)},hydrateColumn({columnDefinition:e,jsonSchema:n,dbData:i}){return{...e,comment:n.refDescription||n.description,unique:n.unique&&!n.compositeUniqueKey,distKey:n.distKey&&!n.compositeDistKey,sortKey:n.sortKey&&!n.compositeSortKey,primaryKey:e.primaryKey&&!n.compositePrimaryKey,encoding:n.encoding,references:""}},commentIfDeactivated(e,n,i){return t(e,n,i)},dropSchema(e){return s(c.dropSchema,{name:e})},alterSchema({name:e,quota:n}){return s(c.alterSchema,{name:e,quota:n})},createUdf(e){return s(c.createFunction,_(e))},createProcedure(e){return s(c.createProcedure,_(e))},dropUdf(e){return s(c.dropFunction,e)},dropProcedure(e){return s(c.dropProcedure,e)},dropTable(e){return s(c.dropTable,{name:e})},alterTableOptions(e,n,{isPrimaryKeyModified:i,isUniqueKeyModified:d,isDistKeyModified:b,isSortKeyModified:L}){var y,I,P,h;let g=U(e.code||e.name,n.name),A=[];if(b){let v=e.DISTSTYLE?`DISTSTYLE ${e.DISTSTYLE.toUpperCase()}`:"",B=o.toUpper(e.DISTSTYLE)==="KEY"?`DISTKEY ${((h=(P=(I=(y=e.distKey)==null?void 0:y[0])==null?void 0:I.compositeDistKey)==null?void 0:P[0])==null?void 0:h.name)||""}`:"",X=`${v} ${B}`;A.push(s(c.alterDistKey,{name:g,distConstraint:X}))}if(L){let v=o.toUpper(e.sortStyle||""),B=o.get(e,"sortKey[0].compositeSortKey",[]),X=O(B,c.compoundSortKey,e.isActivated,{sortStyle:v}).statement;A.push(s(c.alterSortKey,{name:g,sortKeyConstraint:X}))}if(i&&!o.isEmpty(e.primaryKey)){let v=o.get(e,"primaryKey[0].compositePrimaryKey",[]),B=O(v,c.compoundPrimaryKey,e.isActivated).statement;A.push(s(c.alterPrimaryKey,{name:g,primaryKeyConstraint:B}))}if(d&&!o.isEmpty(e.uniqueKey)){let v=o.get(e,"uniqueKey[0].compositeUniqueKey",[]),B=O(v,c.compoundUniqueKey,e.isActivated).statement;A.push(s(c.alterUnique,{name:g,uniqueConstraint:B}))}return A.filter(Boolean).join(`

`)},renameColumn(e,n,i){return s(c.renameColumn,{tableName:e,oldColumnName:n,newColumnName:i})},alterColumnType(e,n){return s(c.alterColumnType,{tableName:e,columnName:n.name,type:Q(n.type,n)})},addColumn(e,n){return s(c.addColumn,{tableName:e,columnStatement:n})},dropColumn(e,n){return s(c.dropColum,{tableName:e,columnName:n})},dropView(e){return s(c.dropView,{name:e})}}};
